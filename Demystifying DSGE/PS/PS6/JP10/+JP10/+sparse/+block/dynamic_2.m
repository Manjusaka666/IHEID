function [y, T, residual, g1] = dynamic_2(y, x, params, steady_state, sparse_rowval, sparse_colval, sparse_colptr, T)
residual=NaN(10, 1);
  residual(1)=(y(19))-(y(24)+(1-params(1))*y(20));
  residual(2)=(y(16)+y(25))-(y(17)+y(10)/params(2)-params(1)*(y(20)+y(24)));
  residual(3)=(y(18))-(params(12)*y(3)+y(21)*params(13)+y(17)*params(14)+params(15)*(y(17)-y(2))+x(2));
  residual(4)=(y(16)*(1-params(1)))-(y(17)-params(1)*params(7)*(2-params(1))*y(20)-params(1)*params(7)*y(24)-params(1)*y(26));
  residual(5)=(y(20)-y(5))-(y(23)-y(22));
  residual(6)=(y(22)-params(3)*y(7))-((1-params(5))/params(5)*(1-params(5)*params(2))*(y(17)*params(8)-(1+params(8))*x(1)+params(1)*y(20)+(y(16)-params(10)*y(1))*(1-params(10))/params(9))+params(2)*(y(37)-y(22)*params(3)));
  residual(7)=(y(23)-params(4)*y(8))-(y(24)*(1-params(6))/params(6)*(1-params(2)*params(6))+params(2)*(y(38)-y(23)*params(4))+x(5));
  residual(8)=(y(16)-params(10)*y(1))-(y(31)-y(16)*params(10)-(1-params(10))/params(9)*(y(18)-y(36)-x(3)+y(45)));
  residual(9)=(y(21))-(y(22)+params(1)*(y(20)-y(5)));
  residual(10)=(y(18)-y(36)-(y(28)-y(42)))-(y(34)-y(19)-params(11)*y(25)-x(4));
if nargout > 3
    g1_v = NaN(47, 1);
g1_v(1)=(-(1/params(2)));
g1_v(2)=(-params(12));
g1_v(3)=params(15);
g1_v(4)=(-1);
g1_v(5)=params(1);
g1_v(6)=(-params(3));
g1_v(7)=(-params(4));
g1_v(8)=(-((1-params(5))/params(5)*(1-params(5)*params(2))*(1-params(10))/params(9)*(-params(10))));
g1_v(9)=(-params(10));
g1_v(10)=(-1);
g1_v(11)=params(1);
g1_v(12)=params(1)*params(7);
g1_v(13)=(-((1-params(6))/params(6)*(1-params(2)*params(6))));
g1_v(14)=1;
g1_v(15)=params(11);
g1_v(16)=1;
g1_v(17)=(1-params(10))/params(9);
g1_v(18)=1;
g1_v(19)=(-1);
g1_v(20)=(-(params(14)+params(15)));
g1_v(21)=(-1);
g1_v(22)=(-((1-params(5))/params(5)*(1-params(5)*params(2))*params(8)));
g1_v(23)=(-(1-params(1)));
g1_v(24)=params(1);
g1_v(25)=params(1)*params(7)*(2-params(1));
g1_v(26)=1;
g1_v(27)=(-(params(1)*(1-params(5))/params(5)*(1-params(5)*params(2))));
g1_v(28)=(-params(1));
g1_v(29)=1;
g1_v(30)=1-params(2)*(-params(3));
g1_v(31)=(-1);
g1_v(32)=(-1);
g1_v(33)=1-params(2)*(-params(4));
g1_v(34)=1;
g1_v(35)=1-params(1);
g1_v(36)=(-((1-params(10))/params(9)*(1-params(5))/params(5)*(1-params(5)*params(2))));
g1_v(37)=1+params(10);
g1_v(38)=(-params(13));
g1_v(39)=1;
g1_v(40)=1;
g1_v(41)=1;
g1_v(42)=(-params(2));
g1_v(43)=(-params(2));
g1_v(44)=(-1);
g1_v(45)=(-((1-params(10))/params(9)));
g1_v(46)=(-1);
g1_v(47)=(-1);
    if ~isoctave && matlab_ver_less_than('9.8')
        sparse_rowval = double(sparse_rowval);
        sparse_colval = double(sparse_colval);
    end
    g1 = sparse(sparse_rowval, sparse_colval, g1_v, 10, 30);
end
end
