Start off with baseline RBC model, add a nominal asset(one-period bond)

Price stickiness only makes sense when ﬁrms can set prices;
hence, need some degree of market power. Special case of
Rotemberg \& Woodford.

Nominal rigidities: Calvo pricing: ﬁrm-speciﬁc shock that tells
you whether you're allowed to reset your price.

\section{Households}
\begin{align*}
    \max &\quad \mathbb{E}_0 \sum_{i=0}^\infty \beta^i \left[ u(c_{t+1}) - \nu(l_{t+i} ) \right] \\
    \text{s.t.} &\quad p_tc_t + b_t = (1+i_{t-1})b_{t-1} + p_t w_t l_t + p_t d_t
\end{align*}
where $c_t$ is quantity of baskets of goods consumed, $p_t$ is the prive of each basket in terms of money,
$d_t$ is the real wage, $d_t$ are dividends(firms' profits) received from owning firms,
$i_t$ is the nominal interest rate, $b_t$ is the quantity of nominal bonds held by the household.

The intertemporal optimality condition is as follows:
\begin{align*}
    u'(c_t) = \beta \mathbb{E}_t(1+r_t)u'(c_{t+1})
\end{align*}
where $r_t$ is the real interest rate given by: $1 + r_t = \frac{1+i_t}{1+\pi_{t+1} }$
and $\pi_{t+1} = \frac{p_{t+1}-p_t}{p_t}$ is the inflation rate between $t$ and $t+1$.

Labor supply is given by:
\begin{align*}
    MRS_{l,c} = \frac{\nu'(l_t)}{u'(c_t)} = w_t
\end{align*}

Introduce the basket of imperfectly substitutable goods
through a consumption aggregator, a description of consumer
preferences over the whole set of goods (indexed by $i$).

The most common aggregator used is the CES:
\[ 
c = \left(\int c(i)^{\frac{\varepsilon-1}{\varepsilon}} di\right)^{\frac{\varepsilon}{\varepsilon-1}}
\]
where $\varepsilon$ is the elasticity of substitution between goods.

\subsection{Expenditure minimization}
Suppose that the household faces prices p(i). The expenditure minimization problem is:
\begin{align*}
    \min &\quad \int p(i) c(i) di \\
    \text{s.t.} &\quad \left(\int c(i)^{\frac{\varepsilon-1}{\varepsilon}} di\right)^{\frac{\varepsilon}{\varepsilon-1}} = c
\end{align*}
Define the Lagrangian:
\begin{align*}
    \mathcal{L} = \int p(i) c(i) di + \lambda \left( c - \left(\int c(i)^{\frac{\varepsilon-1}{\varepsilon}} di\right)^{\frac{\varepsilon}{\varepsilon-1}} \right)
\end{align*}
The first order conditions are:
\begin{align*}
    \frac{\partial \mathcal{L}}{\partial c(i)} &= p(i) - \lambda c(i)^{-\frac{1}{\varepsilon}}\left(\int c(i)^{\frac{\varepsilon-1}{\varepsilon}} di\right)^{\frac{\varepsilon}{\varepsilon-1}-1} = 0 \\
    \Rightarrow p(i) &= \lambda c(i)^{-\frac{1}{\varepsilon}}c^{\frac{1}{\varepsilon}}
\end{align*}
From the first order conditions we get:
\begin{align*}
    c(i) = c \left( \frac{p(i)}{\lambda} \right)^{-\varepsilon}
\end{align*}
Substitute this into the FOC to get:
\begin{align*}
    c &= \left( \int \left(\frac{p(i)}{\lambda }\right)^{1-\varepsilon} c^{\frac{\varepsilon-1}{\varepsilon}} di \right)^{\frac{\varepsilon}{\varepsilon-1}} \\
    \lambda &= \left( \int p(i)^{1-\varepsilon} di \right)^{\frac{1}{1-\varepsilon}}
\end{align*}
Interpret $\lambda$ as the shadow price:"If you tighten the
constraint by one unit, the objective function increases by $\lambda$ units."
$\lambda$ is the price of one basket, $p_t = \lambda$.

Hence, the demand for good $i$ is:
\begin{align*}
    c(i) = c \left( \frac{p(i)}{p} \right)^{-\varepsilon}
\end{align*}
where
\begin{align*}
    p = \left( \int p(i)^{1-\varepsilon} di \right)^{\frac{1}{1-\varepsilon}}
\end{align*}
Interpretation: demand depends on the relative price $p(i)/p$.

\subsection{Production technology and market clearing}
Output $y(i)$ is given by production function:
\begin{align*}
    y_t(i) = a_t h_t(i)
\end{align*}
where $a_t$ is the total factor productivity and $h_t(i)$ is the hours of labor used in production of good $i$.

Assuming there's no investment of gov spending, the market clearing condition is:
\begin{align*}
    y_t(i) = c_t(i), c_t = y_t
\end{align*}

Interpret $l_t$ as average labor supplied per good, the labor market clearing:
\begin{align*}
    l_t = \int h_t(i) di
\end{align*}

Firm $i$ faces demand function:
\begin{align*}
    y_t(i) = c_t(i) = y_t \left( \frac{p(i)}{p} \right)^{-\varepsilon}, p_t = \left( \int p(i)^{1-\varepsilon} di \right)^{\frac{1}{1-\varepsilon}}
\end{align*}
Firm $i$ has the power to set price $p_t(i)$, but it is too small to affect
the general price level $p_t$ or aggregate demand $y_t$ (monopolistic
competition).

In a competitive market, firms can hire labor at the wage rate $w_t$, let $z_t$ denote the real cost of production
per unit of output. With linear production function for $y(i)$, we have:
\[
z_t = \frac{w_t}{a_t}
\]
with total revenue: $\frac{p_t(i)}{p_t} y_t(i)$, total cost: $z_t y_t(i)$.

The profits made by firm $i$ at time $t$ is:
\[
d_t(i) = \frac{p_t(i)}{p_t} y_t(i) - z_t y_t(i) = \left(\frac{p_t(i)}{p_t}-z_t\right)\left(\frac{p_t(i)}{p_t}\right)^{-\varepsilon}y_t
\]
Let $\mu_t(i) = \frac{p_t(i)}{p_t z_t}$ be the firm $i$'s (gross) markup of price over marginal cost.

The expression for profits can be rewritten as:
\[
d_t(i) = z_t^{1-\varepsilon}y_t (\mu_t(i)^{1-\varepsilon} - \mu_t(i)^{-\varepsilon})
\]

Let's first consider a world with flexible prices. To maximize profits, firm $i$ chooses $\mu_t(i)$ to solve:
\[
\max_{\mu_t(i)} d_t(i) = z_t^{1-\varepsilon}y_t (\mu_t(i)^{1-\varepsilon} - \mu_t(i)^{-\varepsilon})
\]
The first order condition is:
\[
\frac{\partial d_t(i)}{\partial \mu_t(i)} = z_t^{1-\varepsilon}y_t ((1-\varepsilon)\mu_t(i)^{-\varepsilon} + \varepsilon \mu_t(i)^{-\varepsilon-1}) = 0 \Rightarrow \mu_t^* = \frac{\varepsilon}{\varepsilon-1}
\]
So, a higher price elasticity $\varepsilon$ will cause a lower markup.

\subsection{General Equilibrium with flexible prices}

Assuming the following utility function:
\[
u(c) = \frac{c^{1-\frac{1}{\sigma}}}{1-\frac{1}{\sigma}}, \nu(l) = l
\]
The labor supply condition is:
\[
w_t = \frac{\nu^{\prime}(l_t)}{u^{\prime}(c_t)} = y_t^{\frac{1}{\sigma}}
\]
Assuming the market clearing condition holds, $c_t = y_t$.
The firm's profit maximization implies that 
\[
w_t = \frac{a_t}{\mu_t^*}.
\]
\textcolor{red}{Wage equals to the marginal revenue product of capital.}

\subsection{Flexible-price world: natural level of output}
With flexible prices, all firms set the samse markup: $\mu_t(i) = \mu_t^*$.
Hence the price would also be the same: $p_t(i) = p_t^*$ and the markups
become:
\[
\mu_t^* = \frac{1}{z_t}
\]
The natural level of output is the level of output that would be produced if all prices were flexible.
The natural level of output is given by:
\[
y_t^{\frac{1}{\sigma}} = w_t = \frac{a_t}{\mu_t^*}
\]
Hence the natural level of output is:
\[
y_t^* = \left( \frac{a_t}{\mu_t^*} \right)^{\sigma}
\]
\begin{itemize}
    \item The natural output is higher when productivity $a_t$ is higher.
    \item The natural output is lower when the markup(market power) $\mu_t^*$ is higher.
\end{itemize}

\subsection{Natural real interest rate}
The natural real interest rate is the real interest rate consistent with the natural level of output.

This requires $c_t = y_t = y_t^*$, which implies:
\[
u^{\prime} (y_t^*) = \beta (1+r_t^*)u^{\prime} (y_{t+1}^*)
\]
with $r_t^*$ being the natural real interest rate.

Using $u^{\prime}(c) = c^{-\frac{1}{\sigma}}$, we get:
\begin{align*}
    \left(y_t^{*}\right)^{-\frac{1}{\sigma}} &= \beta (1+r_t^*)\left(y_{t+1}^*\right)^{-\frac{1}{\sigma}}\\
    \frac{\mu_t^*}{a_t} &= \beta (1+r_t^*)\frac{\mu_{t+1}^*}{a_{t+1}}
\end{align*}
The natural interest rate is given by:
\[
1 + r_t^* = (1+\bar{r}) \frac{a_{t+1}}{a_t} \frac{\mu_t^*}{ \mu_{t+1}^*}
\]
where $\bar{r}$ is the average interest rate in the steady state with $\beta = \frac{1}{1+\overline{r}}$.

\subsection{Efficiency of output}

Imperfect competition makes market allocation of output not Pareto efficient.

Perfect competition is consistent with efficiency, so we can ask what level of output is efficient by 
finding the equilibrium in the special case of perfect competition:
\begin{itemize}
    \item perfect competition: perfectly elastic demand curve because of perfect substitutability(no market power): $\varepsilon \to \infty$
    \item zero markup: $\mu_t^* \to 1$.
\end{itemize}

\textbf{Efficient Output:} $\hat{y}_t$ found using formula for natural output, and setting $\mu_t^* = 1$:
\[
\hat{y}_t = a_t^{\sigma}
\]

\textbf{Efficient interest rate} $\hat{r}_t$ is the real interest rate consistent with output as its efficient level:
\[
1 + \hat{r}_t = (1+\bar{r}) \frac{a_{t+1}}{a_t}.
\]

\subsection{Nominal Rigidities}

\begin{assumption}[Calvo and Yun]
    \ 

    \textbf{Calvo pricing:} Each period, a random selected fraction of $1-\phi$ of firms has an opportunity to reset its price.
    All other firms must continue to use the same price as before.

    This is a simple idea in a complicated approach:
    \begin{itemize}
        \item firms face a fixed physical cost of adjusting prices
        \item need to calculate the points in time when gains from adjusting prices exceed the costs
        \item hard to do in a dynamic model
    \end{itemize}
\end{assumption}

\subsection{Setting a new price}

Suppose firm $i$ set the new price $s_t$ at time $t$.
In each subsequent period, probability $\phi $ that the price won't be changed.
Hence, the probability that the price is still used at time $T>t$ is $\phi^{T-t}$.

The expected present value of profits from setting price $s_t$ at time $t$ is:
\[
d_t(i) + \phi \frac{d_{t+1}(i)}{1+r_t} + \phi^2 \frac{d_{t+2}(i)}{(1+r_t)(1+r_{t+1})} + \ldots
\]
where dividends(=profits) $d_t, d_{t+1}, \ldots$ are calculated assuming the price remains 'sticky' at $s_t$:
$p_t = p_{t+1} = \ldots = s_t.$

From the firms' profits equation, we have:
\[
d_t(i) = \left(\frac{p_t(i)}{p_t} - z_t\right)\left(\frac{p_t(i)}{p_t}\right)^{-\varepsilon}y_t
\]
we get the objective function to maximize:
\[
\max \mathbb{E}_t \sum_{i=0}^{\infty} \left(\prod_{j=1}^{i}\frac{1}{1+r_{t+j-1} }\right) \phi^{i} \left(\frac{p_t(i)}{p_{t+i}} - z_{t+i}\right)\left(\frac{p_t(i)}{p_{t+i}}\right)^{-\varepsilon}y_{t+i}
\]
the first order condition with respect to $\varepsilon$ is:
\[
\mathbb{E}_t \sum_{i=0}^{\infty} \left(\prod_{j=1}^{i}\frac{1}{1+r_{t+j-1} }\right) \phi^{i} \left((1-\varepsilon)\frac{p_t(i)}{p_{t+i}} + \varepsilon z_{t+i}\right) \frac{1}{p_t(i)} \left(\frac{p_t(i)}{p_{t+i}}\right)^{-\varepsilon}y_{t+i} = 0
\]
plug in the Euler equation to get rid of the interest rates:
\[
\mathbb{E}_t \sum_{i=0}^{\infty} y_{t+i}^{1+\frac{1}{\sigma}}  \beta^{i} \phi^{i} \left((1-\varepsilon)\frac{p_t(i)}{p_{t+i}} + \varepsilon z_{t+i}\right) \frac{1}{p_t(i)} \left(\frac{p_t(i)}{p_{t+i}}\right)^{-\varepsilon}= 0
\]
The optimal reset price $p_t(i)$ doesn't depend on the current price level $p_t$, denote by $s_t$ for simplicity.
We have:
\[
\mathbb{E}_t \sum_{i=0}^{\infty} y_{t+i}^{1+\frac{1}{\sigma}} (\beta\phi)^{i} \left(\frac{s_t}{p_{t+i}}\right)^{1-\varepsilon} = \frac{\varepsilon}{1-\varepsilon} \mathbb{E}_t \sum_{i=0}^{\infty} y_{t+i}^{1+\frac{1}{\sigma}} (\beta\phi)^{i} z_{t+i} \left(\frac{s_t}{p_{t+i}}\right)^{-\varepsilon}
\]
then log-linearize the above equation to get:
\[
\tilde{s_t} = (1 - \beta \phi)\mathbb{E}_t\left(\sum_{i=0}^{\infty}(\beta \phi)^i(\tilde{p}_{t+i}+\tilde{z}_{t+i}) \right)
\]
This indicates that firms set price in accordance with current and expected future price level and cost deviations.

Write the equation for time $t+1$ and subtract from this equation to get:
\[
\tilde{s_t} - \beta \phi\mathbb{E}_t \tilde{s}_{t+1} = (1-\beta \phi)(\tilde{p}_t + \tilde{z}_t)
\]

\subsection{Overall price level}
Recall the overall price level:
\[
p_t = \left( \int p_t(i)^{1-\varepsilon} di \right)^{\frac{1}{1-\varepsilon}}
\]
The log-linearized version of the above equation is:
\[
\tilde{p}_t = \int \tilde{p}_t(i)di
\]

